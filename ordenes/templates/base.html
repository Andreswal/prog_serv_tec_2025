
{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}ProgSerTec25{% endblock %}</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  {% block head %}{% endblock %}
</head>
<body>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
 
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">ProgSerTec25</a>
  </nav>
  <main class="container mt-4">
    {% block content %}
    {% endblock %}
  </main>
 
    <div id="escritorio" style="position: relative; width: 100%; height: 100vh; background: #f0f0f0;">
  </div>
  
    <div id="menu" style="position: fixed; top: 0; left: 0; background: #333; color: white; padding: 10px;">
        <button onclick="abrirVentana('equipos', '/equipos/parcial/')">📦 Equipos en Taller</button>
    <button onclick="abrirVentana('clientes', '/clientes/parcial/')">👤 Clientes</button> 
      </div>
  
    <script>
    // Función principal para abrir y cargar contenido
    function abrirVentana(id, url) {
      if (document.getElementById('ventana-' + id)) {
        // Si ya está abierta, la traemos al frente
        document.getElementById('ventana-' + id).style.zIndex = Date.now();
        return;
      }
    
      const ventana = document.createElement('div');
      ventana.id = 'ventana-' + id;
      ventana.className = 'ventana-flotante';
      ventana.style = `
        position: absolute;
        top: 60px;
        left: 60px;
        width: 800px;
        height: 500px;
        background: white;
        border: 2px solid #444;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
        z-index: ${Date.now()};
        overflow: auto;
      `;
    
      ventana.innerHTML = `
        <div style="background: #222; color: white; padding: 5px; cursor: move;">
          <span>${id.toUpperCase()}</span>
          <button onclick="document.getElementById('ventana-${id}').remove()" style="float: right;">❌</button>
        </div>
                <div id="contenido-ventana-${id}" style="padding: 10px;">Cargando...</div>
      `;
    
      document.getElementById('escritorio').appendChild(ventana);
    
      // 2. CARGA INICIAL CON JQUERY (.load())
      const selectorContenido = `#contenido-ventana-${id}`;
      $(selectorContenido).load(url, function(response, status, xhr) {
          if (status == "error") {
              // Esto ayuda a diagnosticar si la URL es incorrecta (Error 404)
              console.error(`ERROR ${xhr.status}: Falló la carga de ${url}`);
          }
      });
    }
  </script>
  <script src="{% static 'js/ventanas.js' %}"></script>
  

  <footer class="text-center mt-5">
    © 2025 ProgSerTec25
  </footer>
</body>
</html>